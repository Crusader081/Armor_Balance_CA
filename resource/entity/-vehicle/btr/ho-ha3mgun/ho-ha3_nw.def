{game_entity
	(include "/properties/armoredcar.ext")
	(include "/properties/car_mobility.ext")
	(include "/properties/selection/vehicle.inc"  scale(1.0))
	{Extension "ho-ha3mgun.mdl"}
;	{extension "crew.ext"}
	{props "vehicle" "armored_car" "tractor" "tank" "turret" "wheeled" "explosion_throw_crew" "vision_vehicle_minimum"}
	{targetClass "armoredcar" "ap fg bullet"}
	{targetSelector "tank"}
	{PatherId "vehicle.small"}

	{extender "enumerator"}

	{volume "body"
		{tags "body"}
		{component "body"}
		{thickness 6
		{front 8}
		{top 6}
		{bottom 6}
		}  
	}
	{volume "body1"
		{tags "body"}
		{component "body"}
		{thickness 6
		{front 8}
		{top 6}
		{bottom 6}
		}    
	}
	{volume "body2"
		{tags "body"}
		{component "body"}
		{thickness 6
		{front 8}
		{top 6}
		{bottom 6}
		}    
	}
	{volume "cabin"
		{tags "cabin"}
		{component "cabin"}
		{thickness 6}
	}
	{volume "door"
		{tags "door"}
		{component "door"}
		{thickness 6}
	}
	{volume "door3"
		{tags "door"}
		{component "door"}
		{thickness 6}
	}
	{volume "door4"
		{tags "door"}
		{component "door"}
		{thickness 6}
	}
	{volume "doorleft"
		{tags "door"}
		{component "door"}
		{thickness 6}
	}
	{volume "doorright"
		{tags "door"}
		{component "door"}
		{thickness 6}
	}
	{volume "doorleft1"
		{tags "door"}
		{component "door"}
		{thickness 6}
	}
	{volume "doorright1"
		{tags "door"}
		{component "door"}
		{thickness 6}
	}
	{volume "cargo"
		{tags "cargo"}
		{component "cargo"}
		{thickness 6}
	}
	{volume "body5"
		{tags "body"}
		{component "body"}
		{thickness 6
		{front 8}
		{top 6}
		{bottom 6}
		} 
	}
	{volume "engine"
		{thickness 6}
	}
	{Volume "fuel"
		{thickness 6}
	}
	("armor_light" args 1.0)

	{sensor
		{visor "main" {bone "visor1"} {vision "moto_crew"}}
;		{visor "gunner1" {bone "mgun1"} {vision "moto_crew"}}
;		{visor "gunner2" {bone "mgun2"} {vision "moto_crew"}}
;		{visor "gunner3" {bone "mgun3"} {vision "moto_crew"}}
        {visor "view-around"
            {vision "none"}
            {bone "basis"}
		}          
	}
	
    {boarder
	{anm "passengers"
		{forward	{begin	"board_SdKfz251-1"} {end "seat_passenger"}}
		{reverse 	{end	"emit_tank_1"}}
	}
	{anm "passengers1"
		{forward	{begin	"board_SdKfz251-1"} {end "seat_passenger"}}
		{reverse 	{end	"emit_body"}}
	}
	{anm "driver"
		{forward	{begin	"board_SdKfz251-1"} {end "seat_driver_car"}}
		{reverse 	{end	"emit_body" 1}}
	}
	{anm "gunner"
		{forward	{begin	"board_SdKfz251-1"} {end "seat_passenger"}}
		{reverse 	{end	"emit_body" 1}}
	}
    }

    (define "crew_human"
	{placer
		{place "%place" {group "%group"} {linkbone "%bone"} {turnoff {sensor} {shadow}}}
	}
	{boarder
		{door "%door"}
		{link "%door" "%place" {anm "%animation"} {forward putoff} {reverse puton}}
	}
    )

    ;{placer
    ;{place "driver" {visor "driver"}}
    ;{place "gunner1" {visor "main"}}
    ;}

    ("crew_human" place(driver)	door(emit1) bone(driver) animation(driver)		group(crew))
    ("crew_human" place(gunner1)	door(emit2) bone(gunner1) animation(gunner)		group(crew))
    ;("crew_human" place(gunner2)	door(emit1) bone(gunner2) animation(gunner)		group(crew))
    ;("crew_human" place(gunner3)	door(emit2) bone(gunner3) animation(gunner)		group(crew))
    ("crew_human" place(seat5)	door(emit3) bone(seat05) animation(passengers)	group(crew))
    ("crew_human" place(seat3)	door(emit4) bone(seat03) animation(passengers1)	group(crew))
    ("crew_human" place(seat4)	door(emit3) bone(seat04) animation(passengers)	group(crew))
    ("crew_human" place(seat6)	door(emit4) bone(seat06) animation(passengers)	group(crew))
    ("crew_human" place(seat7)	door(emit3) bone(seat07) animation(passengers)	group(crew))
    ("crew_human" place(seat8)	door(emit4) bone(seat08) animation(passengers)	group(crew))
	

	("wheel" args "wheelright1")
	("wheel" args "wheelleft1")
	("tracks")

	{extender "inventory"
;		{weapon "mgun" 
;			{mask clear}
;		}
;		{weapon "mgun1"
;			{mask "weapon mgun"}
;	    }
		{box
;			{item "mgun" "ammo" 1000}
;			{item "hmgun" "ammo" 300}			
		}
	}
;	{Weaponry
;		{place "mgun1"
;			{type "mgun_main"}
;			{LinkBone "mgun1"}
;			{LinkAnimation "off"}
;			{weapon "type93hmg" filled}			
;			{gunner "gunner1"}
;			{charger "gunner1"}
;			{foresight "foresight4"}
;			("abm_mgun")
;			{basic}
;		}
;		{place "mgun2"
;			{type "mgun_right"}
;			{LinkBone "mgun2"}
;			{LinkAnimation "off"}
;			{weapon "nambu_type97" filled}
;			{gunner "gunner2"}
;			{charger "gunner2"}
;			{foresight "foresight5"}
;			("abm_mgun")
;			{basic}
;		}
;		{place "mgun3"
;			{type "mgun_left"}
;			{LinkBone "mgun3"}
;			{LinkAnimation "off"}
;			{weapon "nambu_type97" filled}
;			{gunner "gunner3"}
;			{charger "gunner3"}
;			{foresight "foresight6"}
;			("abm_mgun")
;			{basic}
;		}
;
;	}  	

(define "tank_trace"
    {Track "left"
	    {Tracer
    		{View %fx} ; "tracks"
    		{Bone %boneleft}
	    	{Step %step}			; 0.7 meters
    	}
		{TextureScroller
	    	{Bone "TrackL"}
    		{Length %len}		; 0.6 meters per animation
    	}
    }
    {Track "right"
    	{Tracer 
	    	{View %fx}
    		{Bone %boneright}
    		{Step %step}			; in meters
	    }
		{TextureScroller
	    	{Bone "TrackR"}
    		{Length %len}		; meters per animation
    	}
    }
)

	{Chassis
	("tank_trace" fx("tracks_mid") step(0.52) len(1.0) boneleft("FXtraceL2") boneright("FXtraceR2"))
	("car_trace" fx("tracewheel02") step(0.09) wheell("wlf") wheelr("wrf") bonel("FXtraceL1") boner("FXtraceR1"))
		("mobility"
			speed(50)
			weight(6.5)
			power(134)
			fuel(200)	
		)
	}
	
	{mass 6500}
}
