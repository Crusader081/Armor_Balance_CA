{entity
	(include "/properties/car.ext")
	(include "/properties/car_mobility.ext")
	(include "/properties/selection/vehicle.inc"  scale(1.1))
	{props "vehicle" "car" "wheeled" "vision_vehicle_minimum"}
	{collider "truck"}
	{targetClass "car" "fg bullet"}	
	("armor_medium" args 1.0)
	
{boarder
	{anm "passengers"
		{forward	{begin	"board_SdKfz251-1"} {end "seat_passenger"}}
		{reverse 	{end	"emit_tank_1"}}
	}
	{anm "passengers1"
		{forward	{begin	"board_SdKfz251-1"} {end "seat_passenger"}}
		{reverse 	{end	"emit_body"}}
	}
	{anm "driver"
		{forward	{begin	"board_SdKfz251-1"} {end "seat_driver_car"}}
		{reverse 	{end	"emit_body" 1}}
	}
	{anm "commander"
		{forward	{begin	"board_SdKfz251-1"} {end "seat_passenger"}}
		{reverse 	{end	"emit_body" 1}}
	}
}

(define "crew_human"
	{placer
		{place "%place" {group "%group"} {linkbone "%bone"} {turnoff {sensor} {shadow}}}
	}
	{boarder
		{door "%door"}
		{link "%door" "%place" {anm "%animation"} {forward putoff} {reverse puton}}
	}
)

{placer
	{place "driver" {visor "driver"}}
	{place "commander" {visor "main"}}
}

("crew_human" place(driver)	door(emit2) bone(driver) animation(driver)		group(crew))
("crew_human" place(commander)	door(emit1) bone(commander) animation(commander)		group(crew))
("crew_human" place(seat1)	door(emit3) bone(seat01) animation(passengers)	group(crew))
("crew_human" place(seat2)	door(emit4) bone(seat02) animation(passengers1)	group(crew))
("crew_human" place(seat3)	door(emit5) bone(seat03) animation(passengers)	group(crew))
("crew_human" place(seat4)	door(emit6) bone(seat04) animation(passengers1)	group(crew))
("crew_human" place(seat5)	door(emit3) bone(seat05) animation(passengers)	group(crew))
("crew_human" place(seat6)	door(emit4) bone(seat06) animation(passengers1)	group(crew))
("crew_human" place(seat7)	door(emit4) bone(seat07) animation(passengers1)	group(crew))
("crew_human" place(seat8)	door(emit1) bone(seat08) animation(commander)	group(crew))
("crew_human" place(seat9)	door(emit5) bone(seat09) animation(passengers)	group(crew))


	{placer
		{place "driver"	{group "crew"}}
		{place "commander"	{group "crew"}}
	}



	 (define "define_place"
	          {placer
	             {place "%place"
	                {linkbone "%place"}
	                {attach squat_lie}
	                {turnoff {shadow}}
	                {obstacle disable}
	             }
	          }
	          {Volume "%place"
	             {tags "attach" "attach_%place"}
	             {able clear {bullet 0} {touch 1}}
	          }
	)
	{Placer
	          {place "attach01"
	             {entity "btrh_repair_kit"}
	             {Linkbone "attach01"}
	             {handlebone "basis"}
	             {obstacle disable}
	          }
	          {place "attach02"
	             {entity "can"}
	             {Linkbone "attach02"}
	             {handlebone "basis"}
	             {obstacle disable}
	          }
	          {place "attach03"
	             {entity "btrh_repair_kit"}
	             {Linkbone "attach03"}
	             {handlebone "basis"}
	             {obstacle disable}
	          }
	          {place "attach04"
	             {entity "box2"}
	             {Linkbone "attach04"}
	             {handlebone "basis"}
	             {obstacle disable}
	          }
	          {place "attach05"
	             {entity "box1"}
	             {Linkbone "attach05"}
	             {handlebone "basis"}
	             {obstacle disable}
	          }
	          {place "attach06"
	             {entity "can"}
	             {Linkbone "attach06"}
	             {handlebone "basis"}
	             {obstacle disable}
	          }
	          {place "attach07"
	             {entity "can"}
	             {Linkbone "attach07"}
	             {handlebone "basis"}
	             {obstacle disable}
	          }
	          {place "attach08"
	             {entity "can"}
	             {Linkbone "attach08"}
	             {handlebone "basis"}
	             {obstacle disable}
	          }
	          {place "attach09"
	             {entity "repair_kit"}
	             {Linkbone "attach09"}
	             {handlebone "basis"}
	             {obstacle disable}
	          }
		}
	)

	("wheel" args "wheelright")
	("wheel" args "wheelleft")
	("tracks")


	{Extension "sd_kfz7.mdl"}
	{Chassis
		("mobility"
			speed(52)
			weight(9.7)
			power(140)
			fuel(215)	
		)
	}
	
   {mass 9700}

	{extender "inventory"
		{box
			{size 6 10}
                        {clear}
			{item "mgun" "ammo" 10000}
			{item "hmgun" "ammo" 6000}
			{item "repair_kit"}
		}
	}
	(define "tank_trace"
   		{Track "left"
	    		{Tracer
    				{View %fx} ; "tracks"
    				{Bone %boneleft}
	    			{Step %step}			; 0.7 meters
    			}
			{TextureScroller
	    			{Bone "TrackL"}
    				{Length %len}		; 0.6 meters per animation
    			}
    		}
    		{Track "right"
    			{Tracer 
	    			{View %fx}
    				{Bone %boneright}
    				{Step %step}			; in meters
	    		}
			{TextureScroller
	    			{Bone "TrackR"}
    				{Length %len}		; meters per animation
    			}
    		}
	)
	
	{Chassis
		; left track must be first
		("tank_trace" fx("tracks_mid") step(0.52) len(1.0) boneleft("FXtraceL2") boneright("FXtraceR2"))
		("car_trace" fx("tracewheel02") step(0.09) wheell("wlf") wheelr("wrf") bonel("FXtraceL1") boner("FXtraceR1"))
	}
	
	{extender "shield"
		(mod "mp"
			{on}
		)
	}
	{component "shield"	
		{RepairTime 10}
	}
	{volume "shield"
		{thickness 0.3}
	}
	{Volume "body"
		{tags "body"}
		{component "body"}
		{thickness 2}
	}
	{component "engine"	
		{RepairTime 15}
	}
	{volume "engine"
		{thickness 5}
	}
	{texmod "panzergrau"}
}
